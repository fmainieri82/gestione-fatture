"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[11],{6011:(j,u,a)=>{a.r(u),a.d(u,{ListaClientiComponent:()=>F});var m=a(177),s=a(9417),c=a(882),C=a(9631),_=a(8834),p=a(9213),g=a(4823),t=a(4438),f=a(4384);function h(l,d){if(1&l){const e=t.RV6();t.j41(0,"div",11)(1,"h3"),t.EFF(2),t.k0s(),t.j41(3,"div",12)(4,"mat-form-field",13)(5,"mat-label"),t.EFF(6,"Ragione Sociale *"),t.k0s(),t.j41(7,"input",14),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.ragioneSociale,n)||(i.nuovoCliente.ragioneSociale=n),t.Njj(n)}),t.k0s()(),t.j41(8,"mat-form-field",13)(9,"mat-label"),t.EFF(10,"P.IVA *"),t.k0s(),t.j41(11,"input",14),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.partitaIva,n)||(i.nuovoCliente.partitaIva=n),t.Njj(n)}),t.k0s()()(),t.j41(12,"div",12)(13,"mat-form-field",13)(14,"mat-label"),t.EFF(15,"Codice Fiscale"),t.k0s(),t.j41(16,"input",15),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.codiceFiscale,n)||(i.nuovoCliente.codiceFiscale=n),t.Njj(n)}),t.k0s()(),t.j41(17,"mat-form-field",13)(18,"mat-label"),t.EFF(19,"Email"),t.k0s(),t.j41(20,"input",16),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.email,n)||(i.nuovoCliente.email=n),t.Njj(n)}),t.k0s()()(),t.j41(21,"div",12)(22,"mat-form-field",13)(23,"mat-label"),t.EFF(24,"Indirizzo *"),t.k0s(),t.j41(25,"input",14),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.indirizzo,n)||(i.nuovoCliente.indirizzo=n),t.Njj(n)}),t.k0s()(),t.j41(26,"mat-form-field",13)(27,"mat-label"),t.EFF(28,"CAP *"),t.k0s(),t.j41(29,"input",14),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.cap,n)||(i.nuovoCliente.cap=n),t.Njj(n)}),t.k0s()()(),t.j41(30,"div",12)(31,"mat-form-field",13)(32,"mat-label"),t.EFF(33,"Citt\xe0 *"),t.k0s(),t.j41(34,"input",14),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.citta,n)||(i.nuovoCliente.citta=n),t.Njj(n)}),t.k0s()(),t.j41(35,"mat-form-field",13)(36,"mat-label"),t.EFF(37,"Prov. *"),t.k0s(),t.j41(38,"input",17),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.provincia,n)||(i.nuovoCliente.provincia=n),t.Njj(n)}),t.k0s()()(),t.j41(39,"div",12)(40,"mat-form-field",13)(41,"mat-label"),t.EFF(42,"Telefono"),t.k0s(),t.j41(43,"input",18),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.telefono,n)||(i.nuovoCliente.telefono=n),t.Njj(n)}),t.k0s()(),t.j41(44,"mat-form-field",13)(45,"mat-label"),t.EFF(46,"PEC"),t.k0s(),t.j41(47,"input",16),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.nuovoCliente.pec,n)||(i.nuovoCliente.pec=n),t.Njj(n)}),t.k0s()()(),t.j41(48,"div",19)(49,"button",2),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.salvaCliente())}),t.j41(50,"mat-icon"),t.EFF(51,"save"),t.k0s(),t.EFF(52," Salva "),t.k0s(),t.j41(53,"button",20),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.annulla())}),t.j41(54,"mat-icon"),t.EFF(55,"cancel"),t.k0s(),t.EFF(56," Annulla "),t.k0s()()()}if(2&l){const e=t.XpG();t.R7$(2),t.SpI("",null!=e.clienteSelezionato&&e.clienteSelezionato.id?"Modifica":"Nuovo"," Cliente"),t.R7$(5),t.R50("ngModel",e.nuovoCliente.ragioneSociale),t.R7$(4),t.R50("ngModel",e.nuovoCliente.partitaIva),t.R7$(5),t.R50("ngModel",e.nuovoCliente.codiceFiscale),t.R7$(4),t.R50("ngModel",e.nuovoCliente.email),t.R7$(5),t.R50("ngModel",e.nuovoCliente.indirizzo),t.R7$(4),t.R50("ngModel",e.nuovoCliente.cap),t.R7$(5),t.R50("ngModel",e.nuovoCliente.citta),t.R7$(4),t.R50("ngModel",e.nuovoCliente.provincia),t.R7$(5),t.R50("ngModel",e.nuovoCliente.telefono),t.R7$(4),t.R50("ngModel",e.nuovoCliente.pec)}}function M(l,d){if(1&l){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"div",21)(11,"button",22),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.modifica(n))}),t.j41(12,"mat-icon"),t.EFF(13,"edit"),t.k0s()(),t.j41(14,"button",23),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.elimina(n.id))}),t.j41(15,"mat-icon"),t.EFF(16,"delete"),t.k0s()()()()()}if(2&l){const e=d.$implicit;t.R7$(2),t.JRh(e.ragioneSociale),t.R7$(2),t.JRh(e.partitaIva),t.R7$(2),t.Lme("",e.citta," (",e.provincia,")"),t.R7$(2),t.JRh(e.email)}}function v(l,d){1&l&&(t.j41(0,"div",24),t.EFF(1," Nessun cliente trovato "),t.k0s())}let F=(()=>{class l{constructor(e){this.clienteService=e,this.clienti=[],this.nuovoCliente=this.inizializzaCliente(),this.clienteSelezionato=null,this.mostraForm=!1,this.searchText=""}ngOnInit(){this.caricaClienti()}caricaClienti(){this.clienteService.getAll().subscribe(e=>this.clienti=e,e=>console.error("Errore caricamento clienti:",e))}cerca(){this.searchText.length>0?this.clienteService.search(this.searchText).subscribe(e=>this.clienti=e):this.caricaClienti()}salvaCliente(){this.clienteSelezionato?.id?this.clienteService.update(this.clienteSelezionato.id,this.nuovoCliente).subscribe(()=>{this.caricaClienti(),this.annulla()},e=>{let o="Errore durante il salvataggio";if(e.error)if(e.error.details){const n=e.error.details;o="Errori di validazione:\n"+Object.keys(n).map(r=>`${r}: ${n[r]}`).join("\n")}else e.error.error?o=e.error.error:"string"==typeof e.error&&(o=e.error);alert(o)}):this.clienteService.create(this.nuovoCliente).subscribe(()=>{this.caricaClienti(),this.annulla()},e=>{let o="Errore durante il salvataggio";if(e.error)if(e.error.details){const n=e.error.details;o="Errori di validazione:\n"+Object.keys(n).map(r=>`${r}: ${n[r]}`).join("\n")}else e.error.error?o=e.error.error:"string"==typeof e.error&&(o=e.error);alert(o)})}modifica(e){this.clienteSelezionato=e,this.nuovoCliente={...e},this.mostraForm=!0}elimina(e){confirm("Sei sicuro di voler eliminare questo cliente?")&&this.clienteService.delete(e).subscribe(()=>this.caricaClienti(),o=>alert("Errore eliminazione: "+o.error))}annulla(){this.mostraForm=!1,this.clienteSelezionato=null,this.nuovoCliente=this.inizializzaCliente()}inizializzaCliente(){return{ragioneSociale:"",partitaIva:"",indirizzo:"",cap:"",citta:"",provincia:""}}static{this.\u0275fac=function(o){return new(o||l)(t.rXU(f.M))}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-lista-clienti"]],standalone:!0,features:[t.aNF],decls:32,vars:6,consts:[[1,"card"],[1,"card-header","flex","justify-between","align-center"],["mat-raised-button","","color","primary",3,"click"],["class","form-container",4,"ngIf"],[1,"search-box","mt-20"],["appearance","outline",1,"search-field"],["matInput","",3,"ngModelChange","input","ngModel"],["matPrefix",""],[1,"data-table"],[4,"ngFor","ngForOf"],["class","text-center mt-20",4,"ngIf"],[1,"form-container"],[1,"form-row"],["appearance","outline",1,"form-field"],["matInput","","required","",3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","type","email",3,"ngModelChange","ngModel"],["matInput","","maxlength","2","required","",3,"ngModelChange","ngModel"],["matInput","","type","tel",3,"ngModelChange","ngModel"],[1,"action-buttons","mt-20"],["mat-button","",3,"click"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","Modifica",3,"click"],["mat-icon-button","","color","warn","matTooltip","Elimina",3,"click"],[1,"text-center","mt-20"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Gestione Clienti"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return n.mostraForm=!n.mostraForm}),t.j41(5,"mat-icon"),t.EFF(6),t.k0s(),t.EFF(7),t.k0s()(),t.DNE(8,h,57,11,"div",3),t.j41(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),t.EFF(12,"Cerca cliente..."),t.k0s(),t.j41(13,"input",6),t.mxI("ngModelChange",function(r){return t.DH7(n.searchText,r)||(n.searchText=r),r}),t.bIt("input",function(){return n.cerca()}),t.k0s(),t.j41(14,"mat-icon",7),t.EFF(15,"search"),t.k0s()()(),t.j41(16,"table",8)(17,"thead")(18,"tr")(19,"th"),t.EFF(20,"Ragione Sociale"),t.k0s(),t.j41(21,"th"),t.EFF(22,"P.IVA"),t.k0s(),t.j41(23,"th"),t.EFF(24,"Citt\xe0"),t.k0s(),t.j41(25,"th"),t.EFF(26,"Email"),t.k0s(),t.j41(27,"th"),t.EFF(28,"Azioni"),t.k0s()()(),t.j41(29,"tbody"),t.DNE(30,M,17,5,"tr",9),t.k0s()(),t.DNE(31,v,2,0,"div",10),t.k0s()),2&o&&(t.R7$(6),t.JRh(n.mostraForm?"close":"add"),t.R7$(),t.SpI(" ",n.mostraForm?"Chiudi":"Nuovo Cliente"," "),t.R7$(),t.Y8G("ngIf",n.mostraForm),t.R7$(5),t.R50("ngModel",n.searchText),t.R7$(17),t.Y8G("ngForOf",n.clienti),t.R7$(),t.Y8G("ngIf",0===n.clienti.length))},dependencies:[m.MD,m.Sq,m.bT,s.YN,s.me,s.BC,s.YS,s.tU,s.vS,c.RG,c.rl,c.nJ,c.JW,C.fS,C.fg,_.Hl,_.$z,_.iY,p.m_,p.An,g.uc,g.oV],styles:[".form-container[_ngcontent-%COMP%]{background:#f9f9f9;padding:24px;border-radius:8px;margin:20px 0}.form-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:24px;color:#333;font-size:20px;font-weight:500}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:8px}.form-field[_ngcontent-%COMP%]{flex:1;width:100%}.form-field[_ngcontent-%COMP%]     .mat-mdc-form-field{width:100%}.form-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding-bottom:0}.form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-input-control{font-size:16px;line-height:1.5}.form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{margin-top:4px}.search-box[_ngcontent-%COMP%]{margin-bottom:20px}.search-field[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]     .mat-mdc-form-field{width:100%}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}"]})}}return l})()}}]);